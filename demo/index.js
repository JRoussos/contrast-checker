(function(){"use strict";const E=e=>{const t=/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(e);if(!t)throw new Error("Invalid hex color format. Expected a 3- or 6-character hex string.");return[parseInt(t[1].length===1?t[1]+t[1]:t[1],16),parseInt(t[2].length===1?t[2]+t[2]:t[2],16),parseInt(t[3].length===1?t[3]+t[3]:t[3],16)]},h=e=>{const t=parseInt(e,10).toString(16);return t.length==1?"0"+t:t},p=(e=[])=>{if(!Array.isArray(e)||e.length!==3||!e.every(t=>!isNaN(t)&&t>=0&&t<=255))throw new Error("Invalid RGB input. Expected an array of three integers between 0 and 255.");return"#"+h(e[0])+h(e[1])+h(e[2])},b=(e,t)=>{const{top:n}=t.getBoundingClientRect(),o=document.createElement("div");o.style.top=n+"px",o.style.background=p(e),o.innerText=p(e),t.innerHTML="",t.append(o)},d=(e=[])=>{if(!Array.isArray(e)||e.length!==3||!e.every(t=>!isNaN(t)&&t>=0&&t<=255))throw new Error("Invalid RGB input. Expected an array of three integers between 0 and 255.");return .2126*e[0]+.7152*e[1]+.0722*e[2]};function i(e){try{this.options={parent:null,child:null},this.canvas=document.createElement("canvas"),e&&this.setComparableElements(e)}catch(t){console.warn("(ERROR) ColorChecker:",t)}}i.prototype.setComparableElements=function(e){if(e.child&&typeof e.child=="string"&&(this.options.child=document.querySelector(e.child)),e.child&&e.child instanceof HTMLElement&&(this.options.child=e.child),!e.child||!this.options.child)throw new Error("The specified child is not found.");if(e.child&&!e.parent){const t=this.options.child.closest(":has(img)");this.options.parent=t?t.querySelector("img"):null}if(e.parent&&e.parent instanceof HTMLElement&&(this.options.parent=e.parent&&e.parent.tagName.toLowerCase()!=="img"?this.options.parent=e.parent.querySelector("img"):e.parent),e.parent&&typeof e.parent=="string"){const t=document.querySelector(e.parent);this.options.parent=t&&t.tagName.toLowerCase()!=="img"?this.options.parent=t.querySelector("img"):t}if(!this.options.parent)throw new Error("Parent <img/> element for specified child is not found.");if(!this.checkeElementsIntersection())throw this.options.child=null,new Error("Child element is not on top of the given image.")},i.prototype.checkeElementsIntersection=function(){const{right:e,left:t,bottom:n,top:o}=this.options.child.getBoundingClientRect(),{right:s,left:g,bottom:m,top:f}=this.options.parent.getBoundingClientRect();return!(e<g||t>s||n<f||o>m)},i.prototype.updateOptions=function(e){try{return this.options={parent:null,child:null},this.setComparableElements(e),this}catch(t){return console.warn("(ERROR) ColorChecker:",t),this}},i.prototype.coreCompareFunction=function(e=[],t=!1){if(Array.isArray(e)&&e.length<=0)throw new Error("Empty colors array");if(!this.options.child||!this.options.parent)throw new Error("Child or parent element is not set.");const n=this.options.child.getBoundingClientRect(),o=this.options.parent.getBoundingClientRect();this.canvas.width=o.width,this.canvas.height=o.height;const s=this.canvas.getContext("2d",{willReadFrequently:!0}),g=n.left-o.left,m=n.top-o.top;s.drawImage(this.options.parent,0,0,this.canvas.width,this.canvas.height);const f=s.getImageData(g,m,n.width,n.height),c=Float32Array.from(f.data),l=c.length/4,a=[0,0,0];for(let r=0;r<l;r++)a[0]+=c[r*4+0],a[1]+=c[r*4+1],a[2]+=c[r*4+2];const y=[Math.floor(a[0]/l),Math.floor(a[1]/l),Math.floor(a[2]/l)],w=d(y),R=e.reduce((r,v)=>{const I=Math.abs(d(E(r))-w),x=Math.abs(d(E(v))-w);return I>x?r:v});return t&&(console.log("Child element",this.options.child),console.log("Parent element",this.options.parent),console.table({"Avg value":p(y),"Avg luminance":w,Result:R}),b(y,this.options.child)),R},i.prototype.compare=function(e=[],t=!1){try{return this.coreCompareFunction(e,t)}catch(n){return console.warn("(ERROR) ColorChecker:",n),"rgb(0, 0, 0)"}},i.prototype.compareAsync=function(e=[],t=!1){return new Promise((n,o)=>{try{n(this.coreCompareFunction(e,t))}catch(s){console.warn("(ERROR) ColorChecker:",s),o(s)}})};const u=new i;function C(e){const t=e.pagination.el,n=["#fff","#000"];u.updateOptions({child:t,parent:e.slides[e.activeIndex].querySelector("img")}),u.compareAsync(n).then(o=>{document.documentElement.style.setProperty("--swiper-pagination-bullet-inactive-opacity",.5),document.documentElement.style.setProperty("--swiper-pagination-bullet-inactive-color",o)})}function A(e){e.slides.forEach(t=>{const n=t.querySelector("span"),o=["#d23d11","#7f99ab","#9cdbb9"];n.style.color=u.updateOptions({child:n}).compare(o)}),C(e)}window.swiper=new Swiper(".mySwiper",{pagination:{el:".swiper-pagination"},on:{init:A,slideChangeTransitionEnd:C}})})();
